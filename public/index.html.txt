<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>üõí My E-Commerce Site</title>
    <style>
      body { font-family: Arial; margin: 40px; }
      .product { border: 1px solid #ddd; padding: 10px; margin: 10px; width: 200px; float: left; }
      img { width: 100%; }
      button { background: #0078d4; color: white; border: none; padding: 8px; cursor: pointer; }
      button:hover { background: #005ea0; }
    </style>
  </head>
  <body>
    <h1>üõçÔ∏è E-Commerce Store</h1>
    <div id="products"></div>

    <script>
      async function loadProducts() {
        const res = await fetch("/api/products");
        const products = await res.json();
        const container = document.getElementById("products");
        products.forEach(p => {
          const div = document.createElement("div");
          div.className = "product";
          div.innerHTML = `
            <img src="${p.image}" alt="${p.name}" />
            <h3>${p.name}</h3>
            <p>$${p.price.toFixed(2)}</p>
            <button onclick="addToCart(${p.id})">Add to Cart</button>
          `;
          container.appendChild(div);
        });
      }

      async function addToCart(id) {
        await fetch("/api/cart", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ productId: id, quantity: 1 })
        });
        alert("Added to cart!");
      }

      loadProducts();
    </script>
  </body>
</html>
